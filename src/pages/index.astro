---
import { getCollection } from 'astro:content';

const allThoughts = await getCollection('thoughts');

// Sort by title alphabetically
const sortedThoughts = [...allThoughts]
  .sort((a, b) => a.data.title.localeCompare(b.data.title));

const maturityEmoji = {
  seed: 'ðŸŒ°',
  sprout: 'ðŸŒ±',
  growing: 'ðŸŒ¿',
  evergreen: 'ðŸŒ³',
};
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TwilightWorld.ai</title>
  <meta name="description" content="Thoughts on building software with AI">
</head>
<body>
  <main class="container">
    <header class="garden-header">
      <h1>TwilightWorld<span class="domain">.ai</span></h1>
      <p class="author">
        <a href="https://www.linkedin.com/in/rodrigo-philander-a757081/" target="_blank" rel="noopener noreferrer">
          Rodrigo Philander
          <svg class="linkedin-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
          </svg>
        </a>
      </p>
      <p class="intro">
        The world of traditional software, and of traditional software engineering, is ending. The autonomous, thinking systems of the future are among us. In this digital garden read my ongoing reflections on building software in the age of AI.
      </p>
    </header>

    <section class="catalog-section">
      <ul class="thoughts-list">
      {sortedThoughts.map(thought => (
        <li class="thought-item">
          <a href={`/thoughts/${thought.slug}`} class="thought-link">
            <div class="thought-content">
              <h2 class="thought-title">{thought.data.title} <span class="thought-emoji">{maturityEmoji[thought.data.maturity]}</span></h2>
              <p class="thought-summary">{thought.data.summary}</p>
            </div>
          </a>
        </li>
      ))}
      </ul>
    </section>

    <div class="maturity-key">
      <span class="key-item"><span class="emoji">ðŸŒ°</span> Seed: Ideas not yet written</span>
      <span class="key-item"><span class="emoji">ðŸŒ±</span> Sprout: Early explorations</span>
      <span class="key-item"><span class="emoji">ðŸŒ¿</span> Growing: Developing thoughts</span>
      <span class="key-item"><span class="emoji">ðŸŒ³</span> Evergreen: Mature concepts</span>
    </div>

  </main>

  <footer class="footer">
    <p class="footer-quote">We live in a twilight world.</p>
    <p class="footer-response">And there are no friends at dusk.</p>
  </footer>

</body>
</html>

<style>
  :root {
    --color-bg: #1e293b;
    --color-text: #f9f5d7;
    --color-text-muted: #d5c4a1;
    --color-border: #334155;
    --color-accent: #22d3ee;
    --color-card-bg: #334155;
    --color-seed: #d4a574;
    --color-sprout: #b8bb26;
    --color-growing: #8ec07c;
    --color-evergreen: #689d6a;
    --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    --font-mono: 'SF Mono', 'Monaco', 'Cascadia Code', monospace;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: var(--font-sans);
    background: var(--color-bg);
    color: var(--color-text);
    line-height: 1.7;
    padding: 2rem 2rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .garden-header {
    text-align: left;
    margin-bottom: 3rem;
  }

  .garden-header h1 {
    font-size: 5rem;
    margin-bottom: 0.5rem;
    font-weight: 700;
  }

  .domain {
    color: #5a6f8f;
  }

  .author {
    margin-top: 0.5rem;
    margin-bottom: 1rem;
  }

  .author a {
    color: var(--color-text-muted);
    text-decoration: none;
    font-size: 1.1rem;
    transition: color 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .author a:hover {
    color: var(--color-accent);
  }

  .linkedin-icon {
    width: 16px;
    height: 16px;
    opacity: 0.8;
  }

  .intro {
    max-width: 700px;
    color: var(--color-text-muted);
    margin-top: 0.5rem;
  }

  .maturity-key {
    display: flex;
    gap: 2rem;
    margin-top: 3rem;
    padding: 1rem;
    background: rgba(51, 65, 85, 0.3);
    border-radius: 0.5rem;
    flex-wrap: wrap;
  }

  .key-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: var(--color-text-muted);
  }

  .key-item .emoji {
    font-size: 1.2em;
  }

  .catalog-section {
    margin-top: 1rem;
  }

  .thoughts-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .thought-item {
    transition: opacity 0.2s;
  }

  .thought-item:hover {
    opacity: 0.8;
  }

  .thought-link {
    display: block;
    text-decoration: none;
    color: var(--color-text);
  }

  .thought-emoji {
    font-size: 1rem;
    margin-left: 0.5rem;
  }

  .thought-content {
    flex: 1;
  }

  .thought-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--color-text);
  }

  .thought-link:hover .thought-title {
    color: var(--color-accent);
  }

  .thought-summary {
    color: var(--color-text-muted);
    font-size: 0.95rem;
    line-height: 1.6;
  }

  .footer {
    max-width: 1200px;
    margin: 2rem auto 0;
    padding: 2rem 1rem 2rem;
    text-align: left;
  }

  .footer-quote {
    font-style: italic;
    color: var(--color-text-muted);
    margin-bottom: 0.5rem;
  }

  .footer-response {
    font-style: italic;
    color: #7a5a42;
  }

  @media (max-width: 768px) {
    .garden-header h1 {
      font-size: 3rem;
    }

    .maturity-key {
      flex-direction: column;
      gap: 0.75rem;
    }

  }
</style>
